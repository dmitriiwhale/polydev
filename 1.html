<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polymarket Arbitrage Scanner</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black min-h-screen p-3 font-mono text-green-500 text-sm">
  
  <!-- Header -->
  <div class="border border-green-700 bg-green-950/30 p-3 mb-3">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="text-xl">₿</span>
        <div>
          <div class="font-bold tracking-wide">POLYMARKET ARB SCANNER</div>
          <div class="text-green-600 text-xs">BTC 15-MIN | ARBITRAGE MODE</div>
        </div>
      </div>
      <div class="text-right">
        <div class="text-xs text-green-600">TOTAL PROFIT</div>
        <div id="totalPnl" class="text-xl font-bold text-green-400">+$0.00</div>
      </div>
    </div>
    
    <div class="flex gap-4 text-xs text-green-600 border-t border-green-800 pt-2 mt-2">
      <span><span class="text-green-400 animate-pulse">●</span> SCANNING</span>
      <span>Arbs Found: <span id="arbsCount" class="text-green-300">0</span></span>
      <span>Scanned: <span id="scanned" class="text-green-300">0</span></span>
    </div>
  </div>

  <!-- Scanner Feed -->
  <div class="border border-green-900 bg-black/60 p-2">
    <div class="text-green-700 text-xs mb-2 border-b border-green-900 pb-1">
      &gt; SCANNING FOR UP + DOWN &lt; $1.00
    </div>
    <div id="trades" class="space-y-0.5"></div>
  </div>

  <!-- Code -->
  <div class="mt-3 border border-green-900 p-2 bg-green-950/10">
    <pre class="text-green-600 text-xs leading-relaxed">while True:
    up = get_price("YES_UP")    
    down = get_price("YES_DOWN")
    
    if up + down < 1.00:        # ARBITRAGE!
        buy("YES_UP", up)
        buy("YES_DOWN", down)
        profit = 1.00 - (up + down)
        log(f"✓ ARB +${profit}")</pre>
  </div>

  <div class="mt-2 text-xs text-green-800 flex justify-between">
    <span>ws://polymarket.com</span>
    <span class="animate-pulse" id="status">scanning...</span>
  </div>

  <script>
    let totalProfit = 0;
    let arbsCount = 0;
    let scanned = 0;
    const tradesContainer = document.getElementById('trades');
    const maxTrades = 12;

    function generateScan() {
      const now = new Date();
      const timestamp = now.toTimeString().slice(0, 8) + '.' + 
        now.getMilliseconds().toString().padStart(3, '0').slice(0, 2);

      // Generate realistic prices
      const upPrice = (Math.random() * 0.35 + 0.15).toFixed(2);  // 0.15 - 0.50
      const downPrice = (Math.random() * 0.35 + 0.45).toFixed(2); // 0.45 - 0.80
      const sum = (parseFloat(upPrice) + parseFloat(downPrice)).toFixed(2);
      
      // ~30% chance of arbitrage opportunity
      const hasArb = Math.random() > 0.7;
      let finalUp = upPrice;
      let finalDown = downPrice;
      let finalSum = sum;
      
      if (hasArb) {
        // Create arbitrage: sum < 1.00
        finalUp = (Math.random() * 0.20 + 0.38).toFixed(2);  // 0.38 - 0.58
        finalDown = (Math.random() * 0.10 + 0.38).toFixed(2); // 0.38 - 0.48
        finalSum = (parseFloat(finalUp) + parseFloat(finalDown)).toFixed(2);
        
        // Make sure it's actually < 1.00
        if (parseFloat(finalSum) >= 1.00) {
          finalDown = (0.99 - parseFloat(finalUp)).toFixed(2);
          finalSum = (parseFloat(finalUp) + parseFloat(finalDown)).toFixed(2);
        }
      }

      const isArb = parseFloat(finalSum) < 1.00;
      const spread = isArb ? (1.00 - parseFloat(finalSum)).toFixed(3) : 0;
      const betSize = isArb ? (Math.random() * 15 + 5).toFixed(2) : 0; // $5-20
      const profit = isArb ? (parseFloat(spread) * parseFloat(betSize)).toFixed(2) : 0;

      return { 
        timestamp, 
        upPrice: finalUp, 
        downPrice: finalDown, 
        sum: finalSum, 
        isArb, 
        spread,
        betSize,
        profit: parseFloat(profit)
      };
    }

    function addScan(scan) {
      scanned++;
      
      const div = document.createElement('div');
      
      if (scan.isArb) {
        arbsCount++;
        totalProfit += scan.profit;
        
        div.className = 'flex items-center gap-2 py-1 px-2 text-xs bg-green-900/40 border-l-2 border-green-400';
        div.innerHTML = `
          <span class="text-green-800 w-20">[${scan.timestamp}]</span>
          <span class="text-green-400">UP</span>
          <span class="text-green-300">$${scan.upPrice}</span>
          <span class="text-green-600">+</span>
          <span class="text-red-400">DOWN</span>
          <span class="text-green-300">$${scan.downPrice}</span>
          <span class="text-green-600">=</span>
          <span class="text-yellow-400 font-bold">$${scan.sum}</span>
          <span class="text-green-400 font-bold animate-pulse">✓ ARB +$${scan.profit}</span>
          <span class="text-green-600 text-xs">($${scan.betSize})</span>
        `;
      } else {
        div.className = 'flex items-center gap-2 py-1 px-2 text-xs';
        div.innerHTML = `
          <span class="text-green-800 w-20">[${scan.timestamp}]</span>
          <span class="text-green-700">UP</span>
          <span class="text-green-600">$${scan.upPrice}</span>
          <span class="text-green-800">+</span>
          <span class="text-green-700">DOWN</span>
          <span class="text-green-600">$${scan.downPrice}</span>
          <span class="text-green-800">=</span>
          <span class="text-green-600">$${scan.sum}</span>
          <span class="text-green-800">— skip</span>
        `;
      }

      // Remove highlight from previous
      const first = tradesContainer.firstChild;
      if (first && first.classList.contains('border-l-2')) {
        first.classList.remove('bg-green-900/40', 'border-l-2', 'border-green-400');
      }

      tradesContainer.insertBefore(div, tradesContainer.firstChild);

      // Fade older
      const allTrades = tradesContainer.children;
      for (let i = 0; i < allTrades.length; i++) {
        allTrades[i].style.opacity = 1 - i * 0.07;
      }

      while (tradesContainer.children.length > maxTrades) {
        tradesContainer.removeChild(tradesContainer.lastChild);
      }

      // Update stats
      document.getElementById('totalPnl').textContent = `+$${totalProfit.toFixed(2)}`;
      document.getElementById('arbsCount').textContent = arbsCount;
      document.getElementById('scanned').textContent = scanned;
    }

    // Initial
    for (let i = 0; i < 6; i++) {
      addScan(generateScan());
    }

    // Fast scanning
    setInterval(() => {
      addScan(generateScan());
    }, 350);
  </script>
</body>
</html>